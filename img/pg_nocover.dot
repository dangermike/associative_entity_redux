digraph {
    rankdir=LR
    node [fontname="courier"]
    graph [fontname="courier-bold" fontsize="18"]
    edge [weight=1000 penwidth="5"]

    {
        node [fontname="courier-bold" shape="circle"]
        start_p [label="person\nname"]
        start_c [label="company\nname"]
    }

    subgraph cluster_pc {
        label="PEOPLE_COMPANIES"
        pk_pc [shape="plaintext" label=<<TABLE BORDER="0" CELLBORDER="1" CELLSPACING="0">
            <TR><TD><B>PK_PEOPLE_COMPANIES</B></TD></TR>
            <TR><TD port="l">person_id</TD></TR>
            <TR><TD port="r">company_id</TD></TR>
        </TABLE>>]
        ix_pc [shape="plaintext" label=<<TABLE BORDER="0" CELLBORDER="1" CELLSPACING="0">
            <TR><TD><B>IX_PEOPLE_COMPANIES_COMPANY_ID</B></TD></TR>
            <TR><TD port="l">company_id</TD></TR>
            <TR><TD port="r">ctid</TD></TR>
        </TABLE>>]
        heap_pc [shape="plaintext" label=<<TABLE BORDER="0" CELLBORDER="1" CELLSPACING="0">
            <TR><TD port="t"><B>HEAP_PEOPLE_COMPANIES_COMPANY</B></TD></TR>
            <TR><TD port="l">ctid</TD></TR>
            <TR><TD port="r">person_id</TD></TR>
            <TR><TD port="r">company_id</TD></TR>
        </TABLE>>]
        { rank=same; pk_pc -> ix_pc [minlen="5" style="invis"] }
        { rank=same; heap_pc -> ix_pc:r [minlen="1" dir="back" color="green"] }
    }

    subgraph cluster_companies {
        label="COMPANIES"
        pk_companies [shape="plaintext" label=<<TABLE  BORDER="0" CELLBORDER="1" CELLSPACING="0">
            <TR><TD><B>PK_COMPANIES</B></TD></TR>
            <TR><TD port="l">id</TD></TR>
            <TR><TD port="r">ctid</TD></TR>
        </TABLE>>]
        ix_companies [shape="plaintext" label=<<TABLE  BORDER="0" CELLBORDER="1" CELLSPACING="0">
            <TR><TD><B>IX_COMPANIES_NAME</B></TD></TR>
            <TR><TD port="r">name</TD></TR>
            <TR><TD port="l">ctid</TD></TR>
        </TABLE>>]
        heap_companies [shape="plaintext" label=<<TABLE  BORDER="0" CELLBORDER="1" CELLSPACING="0">
            <TR><TD><B>HEAP_COMPANIES</B></TD></TR>
            <TR><TD port="t">ctid</TD></TR>
            <TR><TD port="l">id</TD></TR>
            <TR><TD port="r">name</TD></TR>
        </TABLE>>]

        { rank=same; pk_companies -> ix_companies [minlen="5" style="invis"] }
        { rank=same; pk_companies -> heap_companies [color="blue"] }
        { rank=same; ix_companies -> heap_companies [color="green" constraint="false"] }
    }

    subgraph cluster_people {
        label="PEOPLE"
        pk_people [shape="plaintext" label=<<TABLE  BORDER="0" CELLBORDER="1" CELLSPACING="0">
            <TR><TD><B>PK_PEOPLE</B></TD></TR>
            <TR><TD port="l">id</TD></TR>
            <TR><TD port="r">ctid</TD></TR>
        </TABLE>>]
        ix_people [shape="plaintext" label=<<TABLE  BORDER="0" CELLBORDER="1" CELLSPACING="0">
            <TR><TD><B>IX_PEOPLE_NAME</B></TD></TR>
            <TR><TD port="r">name</TD></TR>
            <TR><TD port="l">ctid</TD></TR>
        </TABLE>>]
        heap_people [shape="plaintext" label=<<TABLE  BORDER="0" CELLBORDER="1" CELLSPACING="0">
            <TR><TD><B>HEAP_PEOPLE</B></TD></TR>
            <TR><TD port="t">ctid</TD></TR>
            <TR><TD port="l">id</TD></TR>
            <TR><TD port="r">name</TD></TR>
        </TABLE>>]
        { rank=same; ix_people -> pk_people [minlen=5 style="invis"] }
        { rank=same; ix_people -> heap_people [minlen=1 color="blue"] }
        { rank=same; pk_people -> heap_people [minlen=1 color="green" constraint="false"] }
    }

    {
        edge [color="blue"]
        start_p -> ix_people:r
        ix_people:r -> pk_pc:l [style="invis"]
        heap_people:l -> pk_pc:l
        pk_pc:r -> pk_companies:l
        heap_companies:r -> start_c
    }

    {
        edge [dir="back" color="green"]
        ix_companies:r -> start_c
        ix_pc:l -> ix_companies:l [style="invis"]
        ix_pc:l -> heap_companies:l
        pk_people:l -> ix_pc:r  [style="invis"]
        pk_people:l -> heap_pc:r [constraint="false"]
        start_p -> heap_people:r
    }
}